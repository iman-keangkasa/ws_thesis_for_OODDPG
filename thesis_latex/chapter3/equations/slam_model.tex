
\begin{equation}\label{eq:slam_map}
  \gls{OctomapWorkspace}* = \argmax\limits_{\Phi} P(\Phi|c*,\tau)
\end{equation}

where $\Phi$ is the map of the environment from 
the datastructure infused with the spherical
harmonic terms. $\tau$ is the the set of
waypoints generated by the planner and $c*$ 
is the control-space estimate at the configuration $c_{ee}$.

\begin{equation}\label{eq:slam_localization}
  \begin{aligned}
    c* &= \argmax\limits_{c^{ee}} P(C|\Phi,Z) \\
      &= \argmax\limits_{c_{ee}} \frac{P(z|\Phi*,c_{ee})P(c_{ee}|\Phi*)}{P(Z)} \\
    &=  \argmax\limits_{c_{ee}} log P(z|\Phi*,c_{ee}) + log P(c_{ee}|\Phi*)
  \end{aligned}
\end{equation}

here, $c_{ee}$ is the prior estimate of the state of
the robot's task space on the map model in
\ref{eq:slam_map}. 

With these models, the cost function can be defined as:

\begin{equation}\label{eq:slam_cost}
  Cost(c) = \gamma \epsilon +\sum_{\tau \in C_{cycle}} \Phi^{\gls{time}-1} [\tau_q z]^2
\end{equation}.

The cost function is differentiated with respect to $c$ to minimized the
error $\epsilon$ everytime there is an update on the, sensor reading $z$, map
$\Phi$ and command update from $V$. 

To minimize this cost function, equation \ref{eq:slam_cost} are differentiated.
With this cost function, the configuration of the robot in terms of joint angles are
discerned. 

